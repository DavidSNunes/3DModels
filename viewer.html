<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Vehicle Viewer</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer@1.10.0/dist/model-viewer.min.js"></script>
</head>
<body>
    <h1>View the 3D Vehicle</h1>

    <script>
        // Get the model file name from the URL query string
        const urlParams = new URLSearchParams(window.location.search);
        const modelName = urlParams.get('model') || 'AUDI_A7.glb';  // Default model if not specified

        // Check if the model name is valid (debugging step)
        console.log("Model to load:", modelName);

        // Create a model-viewer element and set its attributes
        const modelViewer = document.createElement('model-viewer');
        modelViewer.setAttribute('src', `https://3dmodels-7c1.pages.dev/models/${modelName}`);
        modelViewer.setAttribute('alt', modelName);
        modelViewer.setAttribute('auto-rotate', true);
        modelViewer.setAttribute('camera-controls', true);
        modelViewer.setAttribute('ar', true);                // Enable AR
        modelViewer.setAttribute('ar-modes', 'scene-viewer quick-look');  // AR Modes for Android/iOS
        modelViewer.setAttribute('ar-scale', 'auto');        // Auto scale for AR

        // Debugging step to check the model is being loaded
        modelViewer.addEventListener('load', () => {
            console.log("Model loaded successfully");
        });
        modelViewer.addEventListener('error', (e) => {
            console.log("Error loading model:", e);
        });

        modelViewer.style.width = '100%';
        modelViewer.style.height = '100vh';

        // Append the model-viewer to the body
        document.body.appendChild(modelViewer);
    </script>
</body>
</html>
